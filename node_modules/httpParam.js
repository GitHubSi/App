/**
 * 用到了url, querystring模块
 * version1: 修改了post请求返回全部数据
 */
var querystring = require('querystring');
var url = require('url');

exports.GET = function (req, key) {
    var param = url.parse(req.url).query;
    var json_param = querystring.parse(param);
    if(!!key){
        return json_param[key] ? json_param[key] : '';
    }
    return json_param;
}

exports.POST = function (req, key, callback) {
    var postData = '';
    req.addListener('data', function (postDataChunk) {
        postData += decodeURI(postDataChunk);
    });
    req.addListener('end', function () {
        var param = querystring.parse(postData);
        if (key != '') {
            var value = param[key] ? param[key] : '';
            callback(value);
            return;
        }
        callback(param);
    });
}
/*
 * Q：req 以为可以不进行赋值，只需要引用到某个页面，然后使用全局变量req，但是报错了。之前的写法是function(key)
 * 返回的只是一个方法，方法内部变量为局部变量。需要通过值传递来进行。
 */